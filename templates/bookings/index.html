{%extends 'admin.html'%}

{%block content%}

<div class="container-fluid">
    <div class="side-body padding-top">
            <div class="container-fluid">
<h1 class="page-title">
    <i class="fas fa-calendar"></i> Bookings
</h1>

    </div>
        <div id="fas fa-notifications"></div>
            <div class="page-content browse container-fluid">
<div class="alerts">
</div>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-bordered">
            <div class="panel-body">
                                            <form method="get" class="form-search">
                        <div id="search-input">
                            <div class="col-2">
                                <select id="search_key" name="key" data-select2-id="search_key" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                                                                    <option value="id">Id</option>
                                                                                    <option value="customer_id">Customer Id</option>
                                                                                    <option value="organiser_id">Organiser Id</option>
                                                                                    <option value="event_id">Event Id</option>
                                                                                    <option value="ticket_id">Ticket Id</option>
                                                                                    <option value="quantity">Quantity</option>
                                                                                    <option value="price">Price</option>
                                                                                    <option value="tax">Tax</option>
                                                                                    <option value="net_price">Net-Price</option>
                                                                                    <option value="status">Status</option>
                                                                                    <option value="created_at">Created At</option>
                                                                                    <option value="updated_at">Updated At</option>
                                                                                    <option value="event_title" selected="" data-select2-id="2">Event Title</option>
                                                                                    <option value="event_start_date">Event Start Date</option>
                                                                                    <option value="event_end_date">Event End Date</option>
                                                                                    <option value="event_start_time">Event Start Time</option>
                                                                                    <option value="event_end_time">Event End Time</option>
                                                                                    <option value="event_repetitive">Event Repetitive</option>
                                                                                    <option value="ticket_title">Ticket Title</option>
                                                                                    <option value="ticket_price">Ticket Price</option>
                                                                                    <option value="event_category">Event Category</option>
                                                                                    <option value="booking_cancel">Booking Cancel</option>
                                                                                    <option value="item_sku">Item Sku</option>
                                                                                    <option value="order_number">Order Number</option>
                                                                                    <option value="transaction_id">Transaction Id</option>
                                                                                    <option value="customer_name">Customer Name</option>
                                                                                    <option value="customer_email">Customer Email</option>
                                                                                    <option value="currency">Currency</option>
                                                                                    <option value="checked_in">Checked In</option>
                                                                                    <option value="payment_type">Payment Type</option>
                                                                                    <option value="is_paid">Is Paid</option>
                                                                                    <option value="is_bulk">Is Bulk</option>
                                                                                    <option value="checked_in_time">Checked In Time</option>
                                                                                    <option value="common_order">Common Order</option>
                                                                            </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="1" style="width: 128px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-search_key-container"><span class="select2-selection__rendered" id="select2-search_key-container" role="textbox" aria-readonly="true" title="Event Title">Event Title</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                            <div class="col-2">
                                <select id="filter" name="filter" data-select2-id="filter" tabindex="-1" class="select2-hidden-accessible" aria-hidden="true">
                                    <option value="contains" data-select2-id="4">contains</option>
                                    <option value="equals">=</option>
                                </select><span class="select2 select2-container select2-container--default" dir="ltr" data-select2-id="3" style="width: 100px;"><span class="selection"><span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-disabled="false" aria-labelledby="select2-filter-container"><span class="select2-selection__rendered" id="select2-filter-container" role="textbox" aria-readonly="true" title="contains">contains</span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span></span></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>
                            </div>
                            <div class="input-group col-md-12">
                                <input type="text" class="form-control" placeholder="Search" name="s" value="">
                                <span class="input-group-btn">
                                    <button class="btn btn-info btn-lg" type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                                                    </form>
                                        <div class="table-responsive">
                    <table id="dataTable" class="table table-hover">
                        <thead>
                            <tr>
                                                                            <th>
                                        <input type="checkbox" class="select_all">
                                    </th>
                                                                                                                <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=id">
                                                                                Id
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=order_number">
                                                                                Order Number
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=event_title">
                                                                                Event Title
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=ticket_title">
                                                                                Ticket Title
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=quantity">
                                                                                Quantity
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=net_price">
                                                                                Net-Price
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=customer_email">
                                                                                Customer Email
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=booking_cancel">
                                                                                Booking Cancel
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=status">
                                                                                Status
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=created_at">
                                                                                Created At
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=checked_in">
                                                                                Checked In
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=payment_type">
                                                                                Payment Type
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th>
                                                                                    <a href="/admin/bookings?sort_order=desc&amp;order_by=is_paid">
                                                                                Is Paid
                                                                                                                                    </a>
                                                                            </th>
                                                                        <th> Expired </th>
                                <th class="actions text-right">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {%for booking in bookings%}
                                 <tr>
                                     <td>
                                        <input type="checkbox" name="row_id" id="checkbox_{{booking['id']}}" value="{{booking['id']}}">
                                    </td>
                                    <td>
                                        <div>{{booking['id']}}</div>
                                    </td>
                                    <td>
                                        <div>{{booking['order_number']}}</div>
                                    </td>
                                    <td>
                                        <div>{{booking['event_id']}}</div>
                                    </td>
                                    <td>
                                                            <div>{{booking['ticket_id']}}</div>
                                    </td>
                                    <td>
                                        <div>{{booking['quantity']}}</div>
                                    </td>
                                     <td>
                                         <div>{{booking['net_price']}}</div>
                                    </td>
                                     <td>
                                          <div>{{booking['customer_email']}}</div>
                                    </td>
                                    <td>
                                       {{'Booking Cancelled' if booking['booking_cancel'] else 'No Cancellation'}}
                                    </td>
                                    <td>
                                       {{'Enabled' if booking['status'] else 'Disabled'}}
                                    </td>
                                    <td>
                                        {{booking['created_at']}}
                                    </td>
                                    <td>
                                        {{'Yes' if booking['checked_in'] else 'No'}}

                                    </td>
                                    <td>
                                       {{booking['payment_type']}}  
                                    </td>
                                    <td>
                                        {{'Yes' if booking['is_paid'] else 'No'}}
                                    </td>
                                
                                    <td>
                                       {{'Yes' if booking['expired'] else 'No'}}
                                    </td>
                               
                                  <td class="no-sort no-click" id="bread-actions">
                                    <a href="javascript:;" title="Delete" class="btn btn-sm btn-danger delete pull-right" onclick="openDeleteModal(&quot;57&quot;)">
                                        <i class="fas fa-trash"></i> <span class="hidden-xs hidden-sm">Delete</span>
                                    </a>

                                    <a href="/admin/bookings/{{booking['id']}}/edit" class="btn btn-sm btn-info edit pull-right">
                                        <i class="fas fa-edit"></i> <span class="hidden-xs hidden-sm">Edit</span>
                                    </a>

                                    <a href="/dashboard/mybookings/{{booking['id']}}" class="btn btn-sm btn-warning view pull-right">
                                        <i class="fas fa-eye"></i> <span class="hidden-xs hidden-sm">View</span>
                                    </a>

                                    <a href="/download/ticket/{{booking['order_number']}}" class="btn btn-sm btn-success download pull-right">
                                        <i class="fas fa-download"></i> <span class="hidden-xs hidden-sm">Download</span>
                                    </a>

                                    
                                    <div class="modal modal-danger fade" tabindex="-1" id="delete_modal57" role="dialog">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                                                    <h4 class="modal-title"><i class="fas fa-trash"></i> Are you sure you want to delete this booking?</h4>
                                                </div>
                                                <div class="modal-footer">
                                                    <form action="/dashboard/mybookings/delete/{{booking['id']}}" id="delete_form" method="GET">
                                                        <input type="hidden" name="_token" value="Eg6OmmUcVUSCkozFQ0aLelfXW7MBTznF30ONwYm0">
                                                        <input type="submit" class="btn btn-danger pull-right delete-confirm" value="Yes, Delete it!">
                                                    </form>
                                                    <button type="button" class="btn btn-default pull-right" data-dismiss="modal">Cancel</button>
                                                </div>
                                            </div><!-- /.modal-content -->
                                        </div><!-- /.modal-dialog -->
                                    </div><!-- /.modal -->
                                </td>
                            </tr>
                            {%endfor%}                                
                            </tbody>
                    </table>
                </div>
                                            <div class="pull-left">
                        <div role="status" class="show-res" aria-live="polite">Showing 1 to 15 of {{bookings | length}} entries</div>
                    </div>
                    <div class="pull-right">
                        <nav>
<ul class="pagination">
    
                    <li class="page-item disabled" aria-disabled="true" aria-label="« Previous">
            <span class="page-link" aria-hidden="true">‹</span>
        </li>
    
    
                    
        
        
                                                                                <li class="page-item active" aria-current="page"><span class="page-link">1</span></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=2">2</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=3">3</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=4">4</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=5">5</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=6">6</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=7">7</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=8">8</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=9">9</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=10">10</a></li>
                                                                                
                            <li class="page-item disabled" aria-disabled="true"><span class="page-link">...</span></li>
        
        
                                    
        
        
                                                                                <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=25">25</a></li>
                                                                                        <li class="page-item"><a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=26">26</a></li>
                                                                
    
                    <li class="page-item">
            <a class="page-link" href="/admin/bookings?order_by=updated_at&amp;sort_order=desc&amp;showSoftDeleted=0&amp;page=2" rel="next" aria-label="Next »">›</a>
        </li>
            </ul>
</nav>

                    </div>
                                    </div>
        </div>
    </div>
</div>
</div>


    </div>
</div>

{%endblock%}